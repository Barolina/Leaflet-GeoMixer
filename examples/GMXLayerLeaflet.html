<!DOCTYPE html>
<html>
<head>
	<title>Leaflet Quick Start Guide Example</title>
	<meta charset="utf-8" />
<style>
html, body {
    height: 100%;
}
</style>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!--<link rel="stylesheet" href="leaflet.css" />-->
	<link rel="stylesheet" href="http://leafletjs.com/dist/leaflet.css" />
	<!--[if lte IE 8]><link rel="stylesheet" href="../dist/leaflet.ie.css" /><![endif]-->
</head>
<body>
	<div>
		<button id="button1">Prev day</button>
		<button id="button2">Next day</button>
		<button id="button3">Day</button>
		<button id="button4">Night</button>
		<button id="button5">All</button>
	</div>

	<div id="map" style="width: 100%; height: 100%"></div>
 
	<script src="http://leafletjs.com/dist/leaflet-src.js"></script>
	<!--	<script src="leaflet-src.js"></script>-->
	<script src="../dist/gmxVectorLayer.js"></script>
	<script>

		var map = L.map('map').setView([55.18, 44], 4);
/**/
		L.tileLayer('http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png', {
			maxZoom: 18,
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>'
		}).addTo(map);
		
		var oneDay = 1000*60*60*24;	// один день
		var ddt1 = new Date(); ddt1.setHours(0, 0, 0, 0);		// начало текущих суток
		ddt1 = new Date(ddt1.getTime() - ddt1.getTimezoneOffset()*60000 - oneDay);	// UTC начальная дата
		var ddt2 = new Date(); ddt2.setHours(23, 59, 59, 999);	// конец текущих суток
		ddt2 = new Date(ddt2.getTime() - ddt2.getTimezoneOffset()*60000 - oneDay);	// UTC

		var gmxLayer = new L.TileLayer.gmxVectorLayer({
			'hostName': 'maps.kosmosnimki.ru'
			//,'apikeyRequestHost': 'maps.kosmosnimki.ru'
			,'apiKey': 'U92596WMIH'
			//,'mapName': '7VKHM'
			//,'layerName': '295894E2A2F742109AB112DBFEAEFF09'
			//,'layerName': 'D2422C4EE6E448A096CF210C2107BB8B'
			//,'layerName': '535729043E62458D902D16F80244AC47'
			//,'minZoom': 3
			//,'maxZoom': 5
			//,'mapName': 'UIRCQ'
			//,'layerName': 'CD73747F9A0440558058DC65228C4F4B'
			,'mapName': 'ATTBP'
			,'layerName': 'EB271FC4D2AD425A9BAA78ADEA041AB9'
			//,'layerName': '7544328985BD489C9715702FBBE2E25E'
			,'beginDate': ddt1
			,'endDate': ddt2
		});
		map.addLayer(gmxLayer);
		document.getElementById("button1").onclick = function()
		{
			ddt1 = new Date(ddt1.getTime() - oneDay);	// UTC начальная дата
			ddt2 = new Date(ddt2.getTime() - oneDay);	// UTC
			gmxLayer.gmxSetDateInterval(ddt1, ddt2);
		}
		document.getElementById("button2").onclick = function()
		{
			ddt1 = new Date(ddt1.getTime() + oneDay);	// UTC начальная дата
			ddt2 = new Date(ddt2.getTime() + oneDay);	// UTC
			gmxLayer.gmxSetDateInterval(ddt1, ddt2);
		}
		document.getElementById("button3").onclick = function()
		{
			gmxLayer.gmxSetVisibility(function(item) { return (item.properties.IsDay === 'True' ? true : false); });
		}
		document.getElementById("button4").onclick = function()
		{
			gmxLayer.gmxSetVisibility(function(item) { return (item.properties.IsDay === 'True' ? false : true); });
		}
		document.getElementById("button5").onclick = function()
		{
			gmxLayer.gmxSetVisibility(null);
		}
/*
		map.addLayer(new L.TileLayer.gmxVectorLayer({
			'hostName': 'maps.kosmosnimki.ru'
			,'apiKey': 'U92596WMIH'
			,'mapName': '7VKHM'
			,'layerName': 'D2422C4EE6E448A096CF210C2107BB8B'
		}));
		map.addLayer(new L.TileLayer.gmxVectorLayer({
			'hostName': 'maps.kosmosnimki.ru'
			,'apiKey': 'U92596WMIH'
			,'mapName': 'UIRCQ'
			,'layerName': 'C4ECFA8061274EFD89E17E44402B28E1'
		}));
*/
	</script>
</body>
</html>
